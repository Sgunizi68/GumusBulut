WITH RECURSIVE takvim AS (
    SELECT DATE(Ekran.Donem.ilkGun) AS Tarih
    UNION ALL
    SELECT DATE_ADD(Tarih, INTERVAL 1 DAY)
    FROM takvim
    WHERE Tarih < Ekran.Donem.SonGun
)
-- 2. Çalışanları günlere göre say
SELECT
    t.Tarih,
    COUNT(c.TC_No) AS Calisan_Sayisi
FROM takvim t
LEFT JOIN SilverCloud.Calisan c
  ON c.Sigorta_Giris <= t.Tarih
 AND (c.Sigorta_Cikis IS NULL OR c.Sigorta_Cikis > t.Tarih)
GROUP BY t.Tarih
ORDER BY t.Tarih;

Örnek
-- 1. Ağustos 2025 için gün listesi oluştur
WITH RECURSIVE takvim AS (
    SELECT DATE('2025-08-01') AS Tarih
    UNION ALL
    SELECT DATE_ADD(Tarih, INTERVAL 1 DAY)
    FROM takvim
    WHERE Tarih < '2025-08-31'
)
-- 2. Çalışanları günlere göre say
SELECT
    t.Tarih,
    COUNT(c.TC_No) AS Calisan_Sayisi
FROM takvim t
LEFT JOIN SilverCloud.Calisan c
  ON c.Sigorta_Giris <= t.Tarih
 AND (c.Sigorta_Cikis IS NULL OR c.Sigorta_Cikis > t.Tarih)
GROUP BY t.Tarih
ORDER BY t.Tarih;