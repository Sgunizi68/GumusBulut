SELECT
    p.Donem,
    SUM(
        p.Miktar *
        (
            SELECT s.Fiyat
            FROM SilverCloud.Stok_Fiyat s
            WHERE s.Malzeme_Kodu = p.Malzeme_Kodu
			AND s.Gecerlilik_Baslangic_Tarih <= STR_TO_DATE(CONCAT('20', p.Donem, '01'), '%Y%m%d')
            ORDER BY s.Gecerlilik_Baslangic_Tarih DESC
            LIMIT 1
        )
    ) AS Donem_Toplami
FROM SilverCloud.Stok_Sayim p
Where Year(STR_TO_DATE(CONCAT('20', p.Donem, '01'), '%Y%m%d'))=Ekran.Yıl
GROUP BY p.Donem
ORDER BY p.Donem;
Örnek

SELECT
    p.Donem,
    SUM(
        p.Miktar *
        (
            SELECT s.Fiyat
            FROM SilverCloud.Stok_Fiyat s
            WHERE s.Malzeme_Kodu = p.Malzeme_Kodu
			AND s.Gecerlilik_Baslangic_Tarih <= STR_TO_DATE(CONCAT('20', p.Donem, '01'), '%Y%m%d')
            ORDER BY s.Gecerlilik_Baslangic_Tarih DESC
            LIMIT 1
        )
    ) AS Donem_Toplami
FROM SilverCloud.Stok_Sayim p
Where Year(STR_TO_DATE(CONCAT('20', p.Donem, '01'), '%Y%m%d'))=2025
GROUP BY p.Donem
ORDER BY p.Donem;