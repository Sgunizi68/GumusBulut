rule:
  name: "Komisyon Hesaplama"
  target: "Komisyon Toplam"
  query: |
    SELECT SUM(Borc)
    FROM SilverCloud.B2B_Ekstre
    WHERE Aciklama LIKE {{Arama_Text_Platform}}
      AND Donem = {{Ekran.Donem}}
  variables:
    Arama_Text_Platform: |
      '%' + {{Donem.AyAdi}} + '%' + ({{Ekran.Platform}} - ' Online') + '%Komisyon%Yansıtma%'
examples:
  - input:
      Donem: "2508"
      Donem.AyAdi: "Ağustos"
      Platform: "Yemek Sepeti Online"
    output:
      Arama_Text_Platform: "%Ağustos%Yemek Sepeti%Komisyon%Yansıtma%"

  - input:
      Donem: "2507"
      Donem.AyAdi: "Temmuz"
      Platform: "Trendyol Online"
    output:
      Arama_Text_Platform: "%Temmuz%Trendyol%Komisyon%Yansıtma%"
